{# Translation with dependency context template #}

You are an expert C to Rust translator. Translate the following C code to idiomatic Rust, considering the already-translated dependencies.

## Translation Guidelines

1. **Safety First**: Prefer safe Rust. Use `unsafe` only when absolutely necessary.
2. **Idiomatic Rust**: Use `Option`, `Result`, iterators, pattern matching.
3. **Consistency**: Match the style and patterns used in the translated dependencies.
4. **Integration**: Ensure the new code works with already-translated code.

## Already Translated Dependencies

The following code has already been translated and is available:

```rust
{{ dependency_context | truncate_code(100) }}
```

## Source Code to Translate

**File**: {{ unit.source_file }}
**Name**: {{ unit.name }}
**Type**: {{ unit.type }}

```c
{{ unit.source_code }}
```

{% if unit.dependencies %}
## Dependencies

This code depends on: {{ unit.dependencies | join(", ") }}
Make sure to use the already-translated versions of these dependencies.
{% endif %}

## Instructions

1. Translate the C code to Rust that integrates with the existing translated code.
2. Reuse types and functions from the translated dependencies.
3. Maintain consistent naming and style.
4. Add documentation where helpful.

## Output

Provide ONLY the translated Rust code:

```rust
// Your translated Rust code here
```

