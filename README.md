# Rustify

**C/C++ to Rust Automatic Translation Tool**

Rustify æ˜¯ä¸€ä¸ªåŸºäºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„ C/C++ åˆ° Rust è‡ªåŠ¨ç¿»è¯‘å·¥å…·ã€‚å®ƒé‡‡ç”¨å…ˆè¿›çš„å¤§è¯­è¨€æ¨¡å‹æŠ€æœ¯ï¼Œç»“åˆä¾èµ–å›¾åˆ†æå’Œæ™ºèƒ½å·¥ä½œæµï¼Œå¸®åŠ©å¼€å‘è€…å°† C/C++ ä»£ç è¿ç§»åˆ°å†…å­˜å®‰å…¨çš„ Rust è¯­è¨€ã€‚

## âœ¨ ç‰¹æ€§

- **æ™ºèƒ½ä¾èµ–åˆ†æ**
  - åŸºäº Tree-sitter çš„ AST è§£æ
  - NetworkX æ„å»ºä¾èµ–å›¾
  - æ‹“æ‰‘æ’åºç¡®å®šç¿»è¯‘é¡ºåº

- **çµæ´»çš„ LLM æ”¯æŒ**
  - é€šè¿‡ LiteLLM æ”¯æŒå¤šç§æ¨¡å‹
  - OpenAI, DeepSeek, Claude ç­‰
  - å¯é…ç½®çš„æ¨ç†å™¨æ¨¡å‹

- **çŠ¶æ€æŒä¹…åŒ–**
  - ç¿»è¯‘è¿›åº¦ä¿å­˜
  - æ”¯æŒæ–­ç‚¹ç»­ä¼ 
  - æ¨¡å—çº§åˆ«çŠ¶æ€ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# ä½¿ç”¨ pip å®‰è£…
pip install rustify

# æˆ–ä»æºç å®‰è£…
git clone https://github.com/rustify/rustify.git
cd rustify
pip install -e .
```

### é…ç½®

åˆ›å»ºé…ç½®æ–‡ä»¶ `rustify.toml`:

```toml
[llm]
model = "deepseek-chat"
api_key = "your-api-key"
base_url = "https://api.deepseek.com"
temperature = 0.7

[reasoner]
model = "deepseek-reasoner"
api_key = "your-api-key"
temperature = 0.2

[rust]
cargo_bin = "cargo"
rustc_bin = "rustc"
edition = "2021"
```

æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```bash
export RUSTIFY_LLM_MODEL=gpt-4
export RUSTIFY_LLM_API_KEY=your-key
```

### ä½¿ç”¨

**å‘½ä»¤è¡Œ:**

```bash
# ç¿»è¯‘é¡¹ç›®
rustify translate ./my-c-project ./my-rust-project

# åˆ†æé¡¹ç›®ï¼ˆä¸ç¿»è¯‘ï¼‰
rustify analyze ./my-c-project

# ä»çŠ¶æ€æ–‡ä»¶æ¢å¤
rustify resume ./my-rust-project/states.json

# åˆå§‹åŒ–é…ç½®æ–‡ä»¶
rustify init
```

**Python API:**

```python
from rustify import Rustify

# åˆ›å»ºå®ä¾‹
rustify = Rustify(
    llm_config={
        "model": "gpt-4",
        "api_key": "your-key",
    }
)

# ç¿»è¯‘é¡¹ç›®
success = rustify.translate(
    source_dir="./my-c-project",
    target_dir="./my-rust-project",
)

# ä»…åˆ†æ
analysis = rustify.analyze_only("./my-c-project")
print(f"Found {analysis['node_count']} code elements")
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
rustify/
â”œâ”€â”€ src/rustify/
â”‚   â”œâ”€â”€ __init__.py          # ä¸»å…¥å£
â”‚   â”œâ”€â”€ config.py             # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ cli.py                # å‘½ä»¤è¡Œæ¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/               # æ™ºèƒ½ä½“ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ base.py           # åŸºç¡€æ™ºèƒ½ä½“
â”‚   â”‚   â”œâ”€â”€ project_manager.py
â”‚   â”‚   â”œâ”€â”€ tech_leader.py
â”‚   â”‚   â”œâ”€â”€ code_monkey.py
â”‚   â”‚   â”œâ”€â”€ test_engineer.py
â”‚   â”‚   â”œâ”€â”€ bench_engineer.py
â”‚   â”‚   â””â”€â”€ reasoner.py
â”‚   â”‚
â”‚   â”œâ”€â”€ schema/               # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ translation.py    # ç¿»è¯‘ä»»åŠ¡æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ project.py        # é¡¹ç›®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ response.py       # å“åº”ç±»å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ state/                # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ state_manager.py
â”‚   â”‚
â”‚   â”œâ”€â”€ graph/                # ä¾èµ–å›¾åˆ†æ
â”‚   â”‚   â”œâ”€â”€ dep_graph.py      # å›¾æ•°æ®ç»“æ„
â”‚   â”‚   â””â”€â”€ parser.py         # C ä»£ç è§£æ
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/                # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ rust_utils.py     # Rust ç¼–è¯‘å·¥å…·
â”‚   â”‚   â”œâ”€â”€ file_tools.py     # æ–‡ä»¶æ“ä½œ
â”‚   â”‚   â””â”€â”€ patch.py          # ä»£ç ä¿®æ”¹
â”‚   â”‚
â”‚   â”œâ”€â”€ prompts/              # Prompt æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚
â”‚   â””â”€â”€ llm/                  # LLM é€‚é…å™¨
â”‚       â””â”€â”€ adapter.py
â”‚
â”œâ”€â”€ tests/                    # æµ‹è¯•
â”œâ”€â”€ pyproject.toml           # é¡¹ç›®é…ç½®
â””â”€â”€ README.md
```

## ğŸ”§ å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Source Project  â”‚  C/C++ æºä»£ç 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProjectManager  â”‚  åŠ è½½ã€åˆ†æã€åˆ›å»ºç›®æ ‡é¡¹ç›®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TechLeader    â”‚  åè°ƒæ¨¡å—ç¿»è¯‘å·¥ä½œæµ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚CodeMon â”‚ â”‚CodeMon â”‚  å¹¶è¡Œç¿»è¯‘å„æ¨¡å—
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TestEngineer   â”‚  ç¿»è¯‘å¹¶è¿è¡Œæµ‹è¯•
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BenchEngineer  â”‚  ç”Ÿæˆå¹¶è¿è¡Œæ€§èƒ½æµ‹è¯•
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Target Project â”‚  Rust ç›®æ ‡ä»£ç 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ æ”¯æŒçš„åŠŸèƒ½

### ä»£ç å…ƒç´ 
- âœ… å‡½æ•°
- âœ… ç»“æ„ä½“
- âœ… æšä¸¾
- âœ… ç±»å‹å®šä¹‰
- âœ… å®ï¼ˆåŸºç¡€ï¼‰
- â³ æ¨¡æ¿/æ³›å‹

### ç¿»è¯‘ç­–ç•¥
- âœ… ç›´æ¥ç¿»è¯‘
- âœ… ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç¿»è¯‘
- âœ… é”™è¯¯ä¿®å¤å¾ªç¯
- âœ… æµ‹è¯•ç”¨ä¾‹ç¿»è¯‘
- âœ… æ€§èƒ½æµ‹è¯•ç”Ÿæˆ

### è¾“å‡ºè´¨é‡
- âœ… å®‰å…¨ Rust ä»£ç 
- âœ… æ–‡æ¡£æ³¨é‡Š
- âœ… é”™è¯¯å¤„ç† (Result/Option)
- âœ… é€‚å½“çš„å¯è§æ€§ä¿®é¥°ç¬¦

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·é˜…è¯» [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£å¦‚ä½•å‚ä¸ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE)

## ğŸ™ è‡´è°¢

