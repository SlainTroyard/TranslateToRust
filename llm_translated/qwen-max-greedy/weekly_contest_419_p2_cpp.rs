```rust
use std::io::{self, BufRead, Write};
use std::collections::VecDeque;

#[derive(Debug, Clone)]
struct TreeNode {
    val: i32,
    left: Option<Rc<RefCell<TreeNode>>>,
    right: Option<Rc<RefCell<TreeNode>>>,
}

impl TreeNode {
    fn new(val: i32) -> Self {
        TreeNode { val, left: None, right: None }
    }

    fn with_children(val: i32, left: Option<Rc<RefCell<TreeNode>>>, right: Option<Rc<RefCell<TreeNode>>>) -> Self {
        TreeNode { val, left, right }
    }
}

struct Solution;

impl Solution {
    fn kth_largest_perfect_subtree(root: Option<Rc<RefCell<TreeNode>>>, k: usize) -> i32 {
        let mut hs = Vec::new();
        let dfs = |node: &Option<Rc<RefCell<TreeNode>>>, f: &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option<Rc<RefCell<TreeNode>>>, &dyn Fn(&Option